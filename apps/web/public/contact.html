<!-- Copied for single-domain hosting via Next.js public/ -->
<!-- Source: deploy/contact.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact – Secure AI Control</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body class="centered" style="padding-top:72px;">
  <main class="card" style="max-width: 900px; text-align: left;">
    <span class="pill">Founder Line</span>
    <h1>Contact the Secure AI Control Team</h1>
    <p class="lead">This form records straight to our database. You’ll see a confirmation when it’s saved.</p>
    <form id="leadForm" style="display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-top:16px;">
      <div style="grid-column: span 1;">
        <label class="page-eyebrow" for="companyName">Company Name</label>
        <input id="companyName" name="companyName" type="text" required style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.7); color:#fff;">
      </div>
      <div style="grid-column: span 1;">
        <label class="page-eyebrow" for="contactName">Contact Name</label>
        <input id="contactName" name="contactName" type="text" style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.7); color:#fff;">
      </div>
      <div style="grid-column: span 1;">
        <label class="page-eyebrow" for="email">Email</label>
        <input id="email" name="email" type="email" required style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.7); color:#fff;">
      </div>
      <div style="grid-column: span 1;">
        <label class="page-eyebrow" for="role">Role</label>
        <input id="role" name="role" type="text" placeholder="Founder, COO, Legal, Compliance..." style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.7); color:#fff;">
      </div>
      <div style="grid-column: span 1;">
        <label class="page-eyebrow" for="offer">Offer</label>
        <select id="offer" name="offer" required style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.7); color:#fff;">
          <option value="Audit Pack Sprint">Audit Pack Sprint</option>
          <option value="Governance Retainer Trial">Governance Retainer Trial</option>
          <option value="Secure Pilot Lab">Secure Pilot Lab</option>
        </select>
      </div>
      <div style="grid-column: span 1;">
        <label class="page-eyebrow" for="workflowTarget">Workflow Target</label>
        <input id="workflowTarget" name="workflowTarget" type="text" placeholder="e.g., AI approvals, custody flow" style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.7); color:#fff;">
      </div>
      <div style="grid-column: span 1;">
        <label class="page-eyebrow" for="urgency">Urgency</label>
        <select id="urgency" name="urgency" style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.7); color:#fff;">
          <option>Now</option>
          <option>&lt;30 days</option>
          <option>30–90 days</option>
          <option>&gt;90 days</option>
        </select>
      </div>
      <div style="grid-column: span 1;">
        <label class="page-eyebrow" for="budgetBand">Budget Band</label>
        <select id="budgetBand" name="budgetBand" style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.7); color:#fff;">
          <option>&lt;£5k</option>
          <option>£5–£10k</option>
          <option>£10–£25k</option>
          <option>£25k+</option>
        </select>
      </div>
      <div style="grid-column: span 2;">
        <label class="page-eyebrow" for="notes">Notes</label>
        <textarea id="notes" name="notes" rows="5" style="width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.7); color:#fff;"></textarea>
      </div>
      <input type="hidden" id="source" name="source" value="Next Contact Page" />
      <div style="grid-column: span 2; display:flex; gap:10px; flex-wrap:wrap; margin-top:8px;">
        <button type="submit" class="cta-button">Submit</button>
        <a class="cta-button secondary" href="/">Back to Landing</a>
      </div>
    </form>
    <div id="confirm" class="muted-note" style="margin-top:12px; display:none;">Thanks—your request was recorded. We’ll be in touch.</div>
    <details style="margin-top:12px;">
      <summary style="cursor:pointer; color:#a5b4fc;">Show debug console</summary>
      <pre id="debugBox" style="white-space:pre-wrap; background:rgba(2,6,23,0.8); border:1px solid rgba(148,163,184,0.25); border-radius:12px; padding:12px; color:#e2e8f0; margin-top:10px; max-height:260px; overflow:auto;"></pre>
    </details>
  </main>
  <script>
    const form = document.getElementById('leadForm');
    const confirmEl = document.getElementById('confirm');
    const debugEl = document.getElementById('debugBox');
    const params = new URLSearchParams(window.location.search);
    const offerParam = params.get('offer');
    const sourceParam = params.get('source');
    if (offerParam) document.getElementById('offer').value = offerParam;
    if (sourceParam) document.getElementById('source').value = sourceParam;
    function logDebug(obj) {
      try {
        const time = new Date().toISOString();
        const existing = debugEl.textContent ? debugEl.textContent + '\n' : '';
        debugEl.textContent = existing + `[${time}] ` + JSON.stringify(obj, null, 2);
      } catch {}
    }
    function resolveApiEndpoint() {
      const endpoint = '/api/leads';
      logDebug({ action: 'resolveEndpoint', endpoint, origin: window.location.origin });
      return endpoint;
    }
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const payload = Object.fromEntries(new FormData(form).entries());
      logDebug({ action: 'submit', payload });
      try {
        const res = await fetch(resolveApiEndpoint(), {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
        });
        logDebug({ action: 'response', status: res.status, ok: res.ok });
        if (!res.ok) {
          const text = await res.text().catch(() => '');
          logDebug({ action: 'responseBody', body: text });
          throw new Error('HTTP ' + res.status);
        }
        confirmEl.style.display = 'block';
        form.reset();
      } catch (err) {
        logDebug({ action: 'fetchError', message: String(err) });
        confirmEl.style.display = 'block';
        confirmEl.textContent = 'We could not record your request. Please try again later.';
      }
    });
  </script>
</body>
</html>

